'use strict';

var reactRouter = require('react-router');
var types = require('../../../types.js');

async function redirectToShopifyOrAppRoot(request, params, responseHeaders) {
    const { api, config } = params;
    const url = new URL(request.url);
    const host = api.utils.sanitizeHost(url.searchParams.get('host'));
    const shop = api.utils.sanitizeShop(url.searchParams.get('shop'));
    let redirectUrl;
    if (config.distribution === types.AppDistribution.ShopifyAdmin) {
        redirectUrl = `/?shop=${shop}&host=${encodeURIComponent(host)}`;
    }
    else {
        redirectUrl = await api.auth.getEmbeddedAppUrl({ rawRequest: request });
    }
    throw reactRouter.redirect(redirectUrl, { headers: responseHeaders });
}

exports.redirectToShopifyOrAppRoot = redirectToShopifyOrAppRoot;
//# sourceMappingURL=redirect-to-shopify-or-app-root.js.map
