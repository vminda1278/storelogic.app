import { redirect } from 'react-router';
import { AppDistribution } from '../../../types.mjs';

async function redirectToShopifyOrAppRoot(request, params, responseHeaders) {
    const { api, config } = params;
    const url = new URL(request.url);
    const host = api.utils.sanitizeHost(url.searchParams.get('host'));
    const shop = api.utils.sanitizeShop(url.searchParams.get('shop'));
    let redirectUrl;
    if (config.distribution === AppDistribution.ShopifyAdmin) {
        redirectUrl = `/?shop=${shop}&host=${encodeURIComponent(host)}`;
    }
    else {
        redirectUrl = await api.auth.getEmbeddedAppUrl({ rawRequest: request });
    }
    throw redirect(redirectUrl, { headers: responseHeaders });
}

export { redirectToShopifyOrAppRoot };
//# sourceMappingURL=redirect-to-shopify-or-app-root.mjs.map
