{"version":3,"file":"api-types.mjs","sources":["../src/api-types.ts"],"sourcesContent":["import fs from 'fs';\n\nimport type {CodegenConfig} from '@graphql-codegen/cli';\n\nimport {preset} from './preset';\nimport {type ShopifyApiTypesOptions} from './types';\nimport {getSchemaData} from './helpers/get-schema-data';\nimport {getOutputFiles} from './helpers/get-output-files';\n\nexport const shopifyApiTypes = ({\n  apiType,\n  apiVersion,\n  module,\n  outputDir = '.',\n  documents = ['**/*.{ts,tsx}', '!**/node_modules'],\n  declarations = true,\n  apiKey,\n  enumsAsConst,\n}: ShopifyApiTypesOptions): CodegenConfig['generates'] => {\n  const {schema, schemaFile} = getSchemaData(outputDir, apiType, {\n    apiVersion,\n    apiKey,\n  });\n  const {typesFile, queryTypesFile} = getOutputFiles(apiType, declarations);\n\n  const schemaFileExists = fs.existsSync(`${schemaFile}`);\n\n  return {\n    ...(schemaFileExists\n      ? {}\n      : {\n          [schemaFile]: {\n            schema,\n            plugins: ['introspection'],\n            config: {minify: true},\n          },\n        }),\n    [`${outputDir}/${typesFile}`]: {\n      schema: schemaFileExists ? schemaFile : schema,\n      plugins: ['typescript'],\n      ...(enumsAsConst !== undefined && {\n        config: {\n          enumsAsConst,\n        },\n      }),\n    },\n    [`${outputDir}/${queryTypesFile}`]: {\n      schema: schemaFileExists ? schemaFile : schema,\n      preset,\n      documents,\n      presetConfig: {apiType, module},\n    },\n  };\n};\n"],"names":[],"mappings":";;;;;AASO,MAAM,eAAe,GAAG,CAAC,EAC9B,OAAO,EACP,UAAU,EACV,MAAM,EACN,SAAS,GAAG,GAAG,EACf,SAAS,GAAG,CAAC,eAAe,EAAE,kBAAkB,CAAC,EACjD,YAAY,GAAG,IAAI,EACnB,MAAM,EACN,YAAY,GACW,KAAgC;IACvD,MAAM,EAAC,MAAM,EAAE,UAAU,EAAC,GAAG,aAAa,CAAC,SAAS,EAAE,OAAO,EAAE;QAC7D,UAAU;QACV,MAAM;AACP,KAAA,CAAC;AACF,IAAA,MAAM,EAAC,SAAS,EAAE,cAAc,EAAC,GAAG,cAAc,CAAC,OAAO,EAAE,YAAY,CAAC;IAEzE,MAAM,gBAAgB,GAAG,EAAE,CAAC,UAAU,CAAC,CAAA,EAAG,UAAU,CAAA,CAAE,CAAC;IAEvD,OAAO;AACL,QAAA,IAAI;AACF,cAAE;AACF,cAAE;gBACE,CAAC,UAAU,GAAG;oBACZ,MAAM;oBACN,OAAO,EAAE,CAAC,eAAe,CAAC;AAC1B,oBAAA,MAAM,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC;AACvB,iBAAA;aACF,CAAC;AACN,QAAA,CAAC,GAAG,SAAS,CAAA,CAAA,EAAI,SAAS,CAAA,CAAE,GAAG;YAC7B,MAAM,EAAE,gBAAgB,GAAG,UAAU,GAAG,MAAM;YAC9C,OAAO,EAAE,CAAC,YAAY,CAAC;AACvB,YAAA,IAAI,YAAY,KAAK,SAAS,IAAI;AAChC,gBAAA,MAAM,EAAE;oBACN,YAAY;AACb,iBAAA;aACF,CAAC;AACH,SAAA;AACD,QAAA,CAAC,GAAG,SAAS,CAAA,CAAA,EAAI,cAAc,CAAA,CAAE,GAAG;YAClC,MAAM,EAAE,gBAAgB,GAAG,UAAU,GAAG,MAAM;YAC9C,MAAM;YACN,SAAS;AACT,YAAA,YAAY,EAAE,EAAC,OAAO,EAAE,MAAM,EAAC;AAChC,SAAA;KACF;AACH;;;;"}